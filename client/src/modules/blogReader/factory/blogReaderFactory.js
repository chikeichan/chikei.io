var list = [
    {
        title: 'New Release',
        threadId: '',
        children: []
    },
    {
        title: 'All Blogs',
        threadId: '',
        children: [
            {
                title: 'Dynamic Programming – Knapsack Problem',
                threadId: 'VGV0cmlzLmpz',
                children: []
            },
            {
                title: 'Create the Universe in Three.js',
                threadId: 'VGV0cmlzLmpz2',
                children: []
            }
        ]
    }
];

var blogs = {
    'VGV0cmlzLmpz': {
        threadId: 'VGV0cmlzLmpz',
        title: 'Dynamic Programming – Knapsack Problem',
        coverUrl: 'http://ak4.picdn.net/shutterstock/videos/754195/preview/stock-footage-man-with-backpack-walks-on-field-sunset-sky-in-background.jpg',
        author: {
            avatarUrl: '',
            name: 'Chi Kei Chan'
        },
        timestamp: 1426662000000,
        content: "\n\t\tDynamic Programming has two key attributes:\n\nRecursive Substructure\nMemo-ization\n\nA recursive substructure is a basic programming concept in which you break down your problem into smaller sub-problems, and that solution to the problem can be constructed using solution to the sub-problems. After find the recursive substructure, we can then keep track of the intermediate result of the sub-problems, and then solve intermediate sub-problems in a specific order to optimize the efficiency of the algorithm.\nHere is a youtube video that does a great job explaining the concepts.\nTo illustrate the power of dynamic problem, I am going to solve the classic knapsack problem. Basically, you are given a backpack with limited capacity, and a list of items with various weight and values. Your algorithm should return a list of quantities of items that you can fit in your backpack to yield the highest value. You will see that this is the general pattern for most dynamic programming problems, in which you are given a constraint and different attributes, and then optimize for a specific attributes.\nInstead of start with a bag of 0 items, like we would do in a recursive-backtracking approach, we should imagine starting with a bag with optimal values, and then reverse engineer to an empty bag. Here is the first question we need to ask ourselves.\nPretend we already have the solution, what was the last step we took to get to the solution?\nIn this case, the last step we took was putting one of the items in our backpack. Following this logic, we can then assume:\n//best is a function that yields best value based on given capacity\n//n is total capacity\n//i is weight of current item\n//P(i) is value of the current item\nBest(n) = Maximum of ( P(i) + Best(n-i) )\n//Where i iterates from first to last items;\nSo now, with a mental model, our solution will be:\nSee it on GitHub\nfunction knapsack(capacity,items){\n //Object to store optimal values of different capacity\n var best = {};\n\n //Find optimal value based on given capacity\n var recurse = function(cap){\n   //Base case\n   if(cap <= 0 ) return 0;\n\n   //Iterate over items\n   items.forEach(function(item){\n     //Return if cap is negative after subtracting item weight\n     if(cap - item[0] < 0) return;\n\n     //Set value equal to item value + recurse(new capacity)\n     var value = item[1] + recurse(cap-item[0]);\n\n     //Ternary operation \n     //IF best[cap] doesn't exit, \n     // set value\n     //otherwise set greater of value OR best[cap]\n     best[cap] = !best[cap] ? value : value > best[cap] ? value : best[cap];\n   })\n\n return best[cap]\n };\n\n recurse(capacity);\n return best[capacity];\n};\nOur algorithm is functional now. Let’s test it!\nvar things = [[1,1],[2,3],[3,6],[4,10],[5,13]];\nconsole.log(knapsack(1,things));  // 1\nconsole.log(knapsack(13,things)); // 33\nconsole.log(knapsack(22,things)); // 56\nconsole.log(knapsack(56,things)); // .... NOTHING!\nMy Macbook Pro won’t return anything for 56 because the algorithm is too expensive. Here is the awesome part of dynamic programming! We simply have to add one line of code to memo-ize the result.\nSee it on GitHub\nfunction knapsack(capacity,items){\n //Object to store optimal values of different capacity\n var best = {};\n\n //Find optimal value based on given capacity\n var recurse = function(cap){\n //Base case\n if(cap <= 0 ) return 0;\n\n // Return Memo-ized\n if(best[cap]) return best[cap];\n\n //Iterate over items\n items.forEach(function(item){\n //Return if cap is negative after subtracting item weight\n if(cap - item[0] < 0) return;\n\n //Set value equal to item value + recurse(new capacity)\n var value = item[1] + recurse(cap-item[0]);\n\n //Ternary operation \n //IF best[cap] doesn't exit, \n // set value\n //otherwise set greater of value OR best[cap]\n best[cap] = !best[cap] ? value : value > best[cap] ? value : best[cap];\n })\n\n return best[cap]\n };\n\n recurse(capacity);\n return best[capacity]\n};\nNow if you test the algorithm again:\nvar things = [[1,1],[2,3],[3,6],[4,10],[5,13]];\nconsole.log(knapsack(1,things));    // 1\nconsole.log(knapsack(13,things));   // 33\nconsole.log(knapsack(22,things));   // 56\nconsole.log(knapsack(56,things));   // 144\nconsole.log(knapsack(77,things));   // 199\nconsole.log(knapsack(2123,things)); // 5519\nSo just how much time did we save? Let’s look at the table below:\n\nSo what caused the dramatic improvement? By returning the memo-ized result and skipping the rest of the recursive call, we saved a lot of repeated work. I will illustrate the call stack of the example below.\n// Find B(5), List of 3 Items [1,1],[2,3],[3,5]\n// P(1) is Value of item 1\n// W(1) is Weight of item 1\n// B(5) is Optimal value with capacity of 5\ni = 0, B(5) = P(1) + B(4)  // this is triggered B(4)\ni = 0, B(4) = P(1) + B(3)  // B(3)\ni = 0, B(3) = P(1) + B(2)  // B(2)\ni = 0, B(2) = P(1) + B(1)  // B(1)\ni = 0, B(1) = P(1) + B(0)  // B(0) return 0, memo-ized B(1) = 1\ni = 1, B(1) = P(2) + B(-1) // B(-1) hit negative, stop B(1)\ni = 0, B(2) = P(1) + B(1)  // B(1) return 1, memo-ized B(2) = 1\ni = 1, B(2) = P(2) + B(0)  // B(0) return 0, memo-ized B(2) = 3\ni = 2, B(2) = P(3) + B(-1) // B(-1) hit negative, stop B(2)\ni = 0, B(3) = P(1) + B(2)  // B(2) return 3, memo-ized B(3) = 3\ni = 1, B(3) = P(2) + B(1)  // B(1) return 1, memo-ized B(3) = 4\ni = 2, B(3) = P(3) + B(0)  // B(0) return 0, memo-ized B(3) = 5\ni = 0, B(4) = P(1) + B(3)  // B(3) return 5, memo-ized B(4) = 6\ni = 1, B(4) = P(2) + B(2)  // B(2) return 3, no change to B(4)\ni = 2, B(4) = P(3) + B(1)  // B(1) return 1, no change to B(4)\ni = 0, B(5) = P(1) + B(4)  // B(4) return 6, memo-ized B(5) = 7\ni = 1, B(5) = P(2) + B(3)  // B(3) return 5, memo-ized B(5) = 8\ni = 2, B(5) = P(3) + B(2)  // B(2) return 3, no change to B(5)\nFor all the highlighted lines, since we had already memo-ized the intermediate results, the algorithm would return the intermediate results without continue the iteration. Had we not used memo-ization, each of the highlighted lines would result in another iteration of the list of items. We effectively saved 5 * 3 = 15 iterations!\nNow, if you want to challenge yourself, the original knapsack question asked for an array of quantities as output, instead of just optimal value. For example, B(1) in the previous example would return [1,0,0]. The complete solution is posted here on my GitHub page.\nHappy Hacking!\n\t\t\n\t\t\t\n\t\t\t\tAbout these ads\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\tOccasionally, some of your visitors may see an advertisement here.\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tTell me more\n\t\t\t\t\t\t\t|\n\t\t\t\t\t\t\tDismiss this message\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t\n\t\tShare this:Press ThisTwitterFacebookGoogleLike this:Like Loading...\n\n\tRelated\nHack Reactor AfterthoughtIn \"Thoughts\"Tetris.js – Implementation of Tetris Using Javascript and JQuery (Part III)In \"Tutorial\"Tetris.js - Implementation of Tetris Using Javascript and JQuery (Part I)In \"Tutorial\"\t\t\t"
    },
    'VGV0cmlzLmpz2': {
        threadId: 'VGV0cmlzLmpz',
        title: 'Create the Universe in Three.js',
        coverUrl: 'http://2.bp.blogspot.com/-c2U3HUQZVy8/UV7KI2bodLI/AAAAAAAAA4g/DJEEmv-FmNY/s1600/galaxy_universe-normal.jpg',
        author: {
            avatarUrl: '',
            name: 'Chi Kei Chan'
        },
        timestamp: -6106035600000,
        content: 'Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. Google Chrome can’t display the webpage because your computer isn’t connected to the Internet. '
    },
}

Trio.Module.export('blogReaderFactory', function() {
    var BlogReaderFactory = Trio.Factory.extend({
        fetchList: function() {
            this.structure = list;
            return list;
        },

        fetchBlog: function(id) {
            return blogs[id];
        }
    });

    return BlogReaderFactory;
});